{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>{% block title %}Power BI Automation Engine{% endblock %}</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
        <link rel="stylesheet" href="{% static 'css/styles.css' %}">
        <link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
        {% block extra_css %}{% endblock %}
    </head>
    <body>
        <div class="page-wrapper">
            <!-- Header with Logo -->
            <header class="header">
                <div class="container-fluid">
                    <div class="header-content">
                        <a href="https://sagetech.com.hk/" class="logo-link" target="_blank" rel="noopener noreferrer">
                            <img src="{% static 'image/logo.png' %}" alt="SAGE Technologies Limited" class="logo">
                        </a>
                        <div class="header-center">
                            <h1 class="header-title">{% block header_title %}Power BI Automation Engine{% endblock %}</h1>
                        </div>
                        <div class="header-spacer"></div>
                    </div>
                </div>
            </header>

            <div class="main-layout">
                <!-- Sidebar -->
                <aside class="sidebar" id="sidebar">
                    <div class="sidebar-header">
                        <button class="collapse-btn btn btn-outline-secondary btn-sm" onclick="toggleSidebar()" id="sidebarToggle">
                            <span class="collapse-arrow" id="collapseArrow">‹</span>
                        </button>
                    </div>
                    <nav class="sidebar-nav">
                        <ul class="nav-list">
                            <li class="nav-item">
                                <a href="{% url 'index' %}" class="nav-link">
                                    <img src="{% static 'image/ServiceIcon/Home.png' %}" alt="Home" class="nav-icon">
                                    <span class="nav-text">Home</span>
                                </a>
                            </li>
                            <li class="nav-item {% if request.resolver_match.url_name == 'job_scheduler' %}active{% endif %}">
                                <a href="{% url 'job_scheduler' %}" class="nav-link">
                                    <img src="{% static 'image/ServiceIcon/JobScheduler.png' %}" alt="Job Scheduler" class="nav-icon">
                                    <span class="nav-text">Job Scheduler</span>
                                </a>
                            </li>
                            <li class="nav-item {% if request.resolver_match.url_name == 'program' %}active{% endif %}">
                                <a href="{% url 'program' %}" class="nav-link">
                                    <img src="{% static 'image/ServiceIcon/Program.png' %}" alt="Program" class="nav-icon">
                                    <span class="nav-text">Program</span>
                                </a>
                            </li>
                            <li class="nav-item {% if request.resolver_match.url_name == 'group' %}active{% endif %}">
                                <a href="{% url 'group' %}" class="nav-link">
                                    <img src="{% static 'image/ServiceIcon/Group.png' %}" alt="Group" class="nav-icon">
                                    <span class="nav-text">Group</span>
                                </a>
                            </li>
                            <li class="nav-item {% if request.resolver_match.url_name == 'email_template' %}active{% endif %}">
                                <a href="{% url 'email_template' %}" class="nav-link">
                                    <img src="{% static 'image/ServiceIcon/EmailTemplate.png' %}" alt="Email Template" class="nav-icon">
                                    <span class="nav-text">Email Template</span>
                                </a>
                            </li>
                            <li class="nav-item {% if request.resolver_match.url_name == 'job_properties' %}active{% endif %}">
                                <a href="{% url 'job_properties' %}" class="nav-link">
                                    <img src="{% static 'image/ServiceIcon/JobProperties.png' %}" alt="Job Properties" class="nav-icon">
                                    <span class="nav-text">Job Properties</span>
                                </a>
                            </li>
                            <li class="nav-item {% if request.resolver_match.url_name == 'configuration' %}active{% endif %}">
                                <a href="{% url 'configuration' %}" class="nav-link">
                                    <img src="{% static 'image/ServiceIcon/Configuration.png' %}" alt="Configuration" class="nav-icon">
                                    <span class="nav-text">Configuration</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </aside>

                <!-- Main Content Area -->
                <main class="main-content-sidebar">
                    <!-- Breadcrumb Navigation -->
                    <div class="breadcrumb-section">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb-custom">
                                {% block breadcrumb %}
                                <li class="breadcrumb-item">
                                    <a href="{% url 'index' %}">Home</a>
                                </li>
                                {% endblock %}
                            </ol>
                        </nav>
                    </div>

                    <!-- Page Header -->
                    <div class="page-header">
                        <div class="page-title-section">
                            <h1 class="page-title">
                                {% block page_title %}Page Title{% endblock %}
                            </h1>
                        </div>
                        
                        <!-- Optional Action Buttons Section -->
                        {% block action_buttons %}{% endblock %}
                    </div>

                    <!-- Optional Search Section -->
                    {% block search_section %}{% endblock %}

                    <!-- Page Content -->
                    <div class="page-content">
                        {% block content %}
                        <!-- Page-specific content goes here -->
                        {% endblock %}
                    </div>
                </main>
            </div>

            <div class="footer">
                <p>Copyright © 2025 SAGE Technologies Limited. All rights reserved.</p>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
        <script src="{% static 'js/sidebar.js' %}"></script>
        {% block extra_js %}{% endblock %}
    </body>
</html>